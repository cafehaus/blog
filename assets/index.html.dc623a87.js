import{r as t,o as e,c as o,a as n,d as a,F as l,h as c,g as p}from"./app.c91e4ae6.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const r={},i=c(`<h1 id="\u591A\u884C\u6587\u5B57\u622A\u53D6\u663E\u793A\u7701\u7565\u53F7\u548C\u66F4\u591A\u6309\u94AE" tabindex="-1"><a class="header-anchor" href="#\u591A\u884C\u6587\u5B57\u622A\u53D6\u663E\u793A\u7701\u7565\u53F7\u548C\u66F4\u591A\u6309\u94AE" aria-hidden="true">#</a> \u591A\u884C\u6587\u5B57\u622A\u53D6\u663E\u793A\u7701\u7565\u53F7\u548C\u66F4\u591A\u6309\u94AE</h1><p>\u6309\u884C\u6570\u622A\u53D6\u53EF\u4EE5\u76F4\u63A5\u7528css\u5B9E\u73B0\uFF0C\u4F46\u662F\u8FD8\u6709\u4E24\u4E2A\u96BE\u70B9\uFF0C\u7B2C\u4E00\u4E2A\u662F\u8981\u5C06\u66F4\u591A\u6587\u5B57\u62FC\u5728\u622A\u53D6\u7684\u7701\u7565\u53F7\u6700\u540E\u9762\uFF0C\u8FD9\u4E2A\u53EF\u4EE5\u7528\u4F2A\u5143\u7D20\u548Cfloat\u5B9E\u73B0\uFF0C\u6700\u5927\u7684\u96BE\u70B9\u662F\u600E\u4E48\u5224\u65AD\u6587\u5B57\u6709\u6CA1\u6709\u8D85\u51FA\uFF0C\u7528css\u662F\u6CA1\u6CD5\u5224\u65AD\u51FA\u6765\u7684\uFF0C\u53EA\u80FD\u7528js\u901A\u8FC7 scrollHeight \u548C clientHeight \u53BB\u5224\u65AD\u3002</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>berif-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in listData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>berif<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>berif<span class="token punctuation">&#39;</span> + index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.overflow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn-more<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> \u66F4\u591A&gt;&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index === 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          WordPress\u9700\u8981\u90E8\u7F72\u5728\u670D\u52A1\u7AEF\uFF0C\u5982\u679C\u6211\u4EEC\u53EA\u662F\u4E3A\u4E86\u770B\u4E0B\u6548\u679C\u6216\u8005\u6D4B\u8BD5\u5F00\u53D1\u4F7F\u7528\uFF0C\u90A3\u5C31\u9700\u8981\u76F4\u63A5\u90E8\u7F72\u5728\u672C\u5730\u3002\u800C\u6211\u4E4B\u6240\u4EE5\u60F3\u8981\u5728\u672C\u5730\u90E8\u7F72\u4E5F\u662F\u56E0\u4E3A\u6253\u7B97\u5F00\u53D1\u4E00\u4E2AWordPress \u7684\u63D2\u4EF6\uFF0C\u5728\u670D\u52A1\u5668\u4E0A\u642D\u5EFA\u548C\u6D4B\u8BD5\u63D2\u4EF6\u592A\u4E0D\u65B9\u4FBF\u4E86\u3002\u6309\u7167\u4EE5\u524D\u7684\u601D\u8DEF\u662F\u9700\u8981\u5728\u672C\u5730\u5B89\u88C5 phpStudy\u3001XAMMP \u8FD9\u7C7B\u670D\u52A1\u5668\u8F6F\u4EF6\uFF0C\u73B0\u5728\u6709\u4E86Docker \u53EF\u5C31\u65B9\u4FBF\u591A\u4E86\uFF0C\u53EA\u7528\u5B89\u88C5\u76F8\u5E94\u955C\u50CF\u8DD1\u8D77\u6765\u5C31\u53EF\u4EE5\u4E86
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
          \u5C31\u662F mysql \u670D\u52A1\u5668\u4E0A\u6CA1\u627E\u5230\u53EB wordpress \u8FD9\u4E2A\u540D\u5B57\u7684\u6570\u636E\u5E93
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u672A\u8D85\u51FA\u76F4\u63A5\u62FC\u5728\u5185\u5BB9\u540E\u9762 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!item.overflow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn-more-unfold<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> \u66F4\u591A&gt;&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">listData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getListData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">getListData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

      <span class="token comment">// \u66F4\u591A\u6309\u94AE\u62FC\u5728\u6587\u5B57\u540E\u9762\uFF0C\u5B58\u4E00\u4E2A overflow \u5C5E\u6027\u53BB\u5224\u65AD</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>listData <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// if (m.settleStatus === 0 &amp;&amp; !m.baseScore) {</span>
            <span class="token comment">//   let name = &#39;berif&#39; + i</span>
            <span class="token comment">//   let el = this.$refs[name]</span>
            <span class="token comment">//   if (el &amp;&amp; el[0] &amp;&amp; (el[0].scrollHeight &gt; el[0].clientHeight)) {</span>
            <span class="token comment">//     m.overflow = true</span>
            <span class="token comment">//   }</span>
            <span class="token comment">// }</span>
            m<span class="token punctuation">.</span>overflow <span class="token operator">=</span> i <span class="token operator">===</span> <span class="token number">0</span>
            <span class="token keyword">return</span> m
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
.page
  width 200px
  margin 100px auto
  .berif-box
    font-size 12px
    color #666
    flex 1
    display flex
    margin-bottom 20px
    .berif
      display -webkit-box
      -webkit-box-orient vertical
      -webkit-line-clamp 3
      overflow hidden
      text-overflow ellipsis
      text-align justify
      position relative
      &amp;<span class="token punctuation">:</span><span class="token punctuation">:</span>before
        content <span class="token string">&#39;&#39;</span>
        float right
        height 100%
        margin-bottom -18px
      .btn-more-unfold
        // width 100%
        // height 100%
        // position absolute
        // background #fff
        color $blue
        cursor pointer
      .btn-more
        color $blue
        cursor pointer
        float right
        clear both

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><ul><li>\u6CE8\u610F macOS \u91CC\u7684 safari \u6D4F\u89C8\u5668\u4E0A\u591A\u884C\u6587\u672C\u622A\u53D6\u663E\u793A\u7701\u7565\u53F7\u6709\u517C\u5BB9\u6027\u95EE\u9898\uFF0C\u4E0D\u80FD\u548C float \u6D6E\u52A8\u4E00\u8D77\u4F7F\u7528\uFF0C\u6240\u4EE5\u9700\u8981\u81EA\u5DF1\u7528 max-height \u6765\u6A21\u62DF\u591A\u884C\u622A\u53D6\u3002</li></ul><h2 id="uni-\u7248\u5C0F\u7A0B\u5E8F\u591A\u884C\u663E\u793A\u7701\u7565" tabindex="-1"><a class="header-anchor" href="#uni-\u7248\u5C0F\u7A0B\u5E8F\u591A\u884C\u663E\u793A\u7701\u7565" aria-hidden="true">#</a> uni \u7248\u5C0F\u7A0B\u5E8F\u591A\u884C\u663E\u793A\u7701\u7565</h2><p>uni \u7248\u7684\u56E0\u4E3A\u8981\u517C\u5BB9\u5C0F\u7A0B\u5E8F\u95EE\u9898\u6BD4\u8F83\u591A\uFF0C\u4E0B\u9762\u7684\u7248\u672C\u5728 ios \u771F\u673A\u4E0A\u6587\u5B57\u4E0D\u663E\u793A\uFF0C\u5F00\u53D1\u5DE5\u5177\u3001h5\u548C\u5B89\u5353\u4E0A\u90FD\u662F\u6B63\u5E38\u7684\uFF0Cios \u4E0A\u4E0D\u6B63\u5E38\u7684\u539F\u56E0\u8FD8\u6CA1\u627E\u5230\u3002</p><p>\u5C0F\u7A0B\u5E8F\u4E0A\u56E0\u4E3A\u5E76\u6CA1\u6709 dom\uFF0C\u4E5F\u6CA1\u6709 scrollHeight \u548C clientHeight\uFF0C\u6240\u4EE5\u601D\u8DEF\u53EA\u80FD\u81EA\u5DF1\u6E32\u67D3\u4E00\u4E2A\u4E0D\u622A\u53D6\u7684\u771F\u5B9E\u5143\u7D20\u6765\u83B7\u53D6\u5B9E\u9645\u7684\u9AD8\u5EA6\uFF0C\u518D\u53BB\u548C\u622A\u53D6\u540E\u7684\u9AD8\u5EA6\u6BD4\u8F83\u3002</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>v-text-overflow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
        <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">&#39;</span>text<span class="token punctuation">&#39;</span>, {<span class="token punctuation">&#39;</span>text-ellipsis<span class="token punctuation">&#39;</span>: !(isOverFlow &amp;&amp; isOpen)}, {<span class="token punctuation">&#39;</span>text-height<span class="token punctuation">&#39;</span>: setHeight}]<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isOverFlow &amp;&amp; !isOpen<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn-down<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleOpen<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          \u5C55\u5F00
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ text }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- \u6536\u8D77\u6309\u94AE --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isOverFlow &amp;&amp; isOpen<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn-up-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn-up<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleOpen<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            \u6536\u8D77
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

      <span class="token comment">&lt;!-- \u517C\u5BB9\u5C0F\u7A0B\u5E8F\u83B7\u53D6\u5B9E\u9645\u6587\u672C\u9AD8\u5EA6 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-original<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ text }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">isOverFlow</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">isOpen</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">setHeight</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// \u9700\u8981\u5728\u83B7\u53D6\u5230\u4E86\u5BF9\u6BD4\u7684\u7ED3\u679C\u540E\uFF0C\u518D\u53BB\u8BBE\u7F6E\u9AD8\u5EA6 setHeight</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>isOverFlow <span class="token operator">=</span> <span class="token boolean">false</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>isOpen <span class="token operator">=</span> <span class="token boolean">false</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>setHeight <span class="token operator">=</span> <span class="token boolean">false</span>
          v <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> query <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
          query<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&#39;.text, .text-original&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>isOverFlow <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">&lt;</span> res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>height
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>isOverFlow <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>setHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isOverFlow
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">handleOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isOpen <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isOpen
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;status&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isOpen<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
.v-text-overflow
  font-size 24rpx
  color #666
  line-height 1.5
  // display flex
  position relative
  .text-original
    position absolute
    z-index -10
    opacity 0
  .text
    &amp;<span class="token punctuation">:</span><span class="token punctuation">:</span>before
      content <span class="token string">&#39;&#39;</span>
      height 100%
      float right
      margin-bottom -36rpx
    .btn-down
      padding-left 20rpx
      color #999
      cursor pointer
      float right
      clear both
    .btn-up-box
      text-align right
    .arrow
      height 34rpx
      width 34rpx
    &amp;.text-ellipsis
      display -webkit-box
      -webkit-box-orient vertical
      -webkit-line-clamp 2
      overflow hidden
      text-overflow ellipsis
      // height 72rpx
      text-align justify
      &amp;.text-height
        height 72rpx

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br></div></div><h3 id="view-design-\u4E2D-tooltip-\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#view-design-\u4E2D-tooltip-\u7EC4\u4EF6" aria-hidden="true">#</a> view-design \u4E2D Tooltip \u7EC4\u4EF6</h3><p>view-design \u4E2D Tooltip \u7EC4\u4EF6\u5224\u65AD\u662F\u5426\u663E\u793A\u6587\u5B57\uFF0C\u91CC\u9762\u6709\u7528\u5230 createRange\u3001setStart\u3001setEnd\uFF0CgetBoundingRect().width \u4F1A\u8FD4\u56DE\u5C0F\u6570\uFF0CoffsetWidth \u8FD4\u56DE\u6574\u6570</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">handleTooltipIn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> $content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>content
  <span class="token keyword">let</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  range<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>$content<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>$content<span class="token punctuation">,</span> $content<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">const</span> rangeWidth <span class="token operator">=</span> range<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width
  <span class="token keyword">this</span><span class="token punctuation">.</span>showTooltip <span class="token operator">=</span> rangeWidth <span class="token operator">&gt;</span> $content<span class="token punctuation">.</span>offsetWidth
  range <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a> \u53C2\u8003</h3>`,12),k={href:"https://github.com/Justineo/vue-clamp",target:"_blank",rel:"noopener noreferrer"},b=p("vue-clamp"),m={href:"https://zhuanlan.zhihu.com/p/465545601",target:"_blank",rel:"noopener noreferrer"},g=p("vue-ellipsis-component: \u6EE1\u8DB3\u591A\u79CD\u573A\u666F\u7684 vue \u7F29\u7565\u7EC4\u4EF6"),d={href:"https://segmentfault.com/a/1190000040030723",target:"_blank",rel:"noopener noreferrer"},h=p("CSS \u5B9E\u73B0\u591A\u884C\u6587\u672C\u201C\u5C55\u5F00\u6536\u8D77\u201D"),f={href:"https://github.com/josephschmitt/Clamp.js/blob/master/clamp.js",target:"_blank",rel:"noopener noreferrer"},v=p("clampjs");function y(w,q){const s=t("ExternalLinkIcon");return e(),o(l,null,[i,n("ul",null,[n("li",null,[n("a",k,[b,a(s)])]),n("li",null,[n("a",m,[g,a(s)])]),n("li",null,[n("a",d,[h,a(s)])]),n("li",null,[n("a",f,[v,a(s)])])])],64)}var O=u(r,[["render",y]]);export{O as default};
